define("viewModels/main",["knockout"],function(e){var n=function(){var n=this;n.currentPage=e.observable(),n.changePage=function(e){var t=n.currentPage();n.currentPage(e),t&&t.dispose&&t.dispose()}};return{create:function(){return new n}}}),define("libs/api",["jquery"],function(e){return{currentTalks:function(){return e.get("/api/talks/current")},applicationVersion:function(){return e.get("/api/applicationVersion")}}}),define("viewModels/home",["knockout","libs/api"],function(e,n){var t=function(e,n,t){var i=this;i.id=e,i.title=n,i.select=function(){t.displayTalkVotePage(e,n)}},i=function(i){var o=this;o.templateName="homeTemplate",o.talks=e.observableArray(),o.waiting=e.observable(!0),n.currentTalks().done(function(n){var r=e.utils.arrayMap(n,function(e){return new t(e.id,e.title,i)});o.talks(r),o.waiting(!1)})};return{create:function(e){return new i(e)}}}),define("viewModels/about",["libs/api","knockout"],function(e,n){var t=function(){var t=this;t.templateName="aboutTemplate",t.applicationVersion=n.observable("non déterminée"),e.applicationVersion().done(function(e){t.applicationVersion(e.applicationVersion)})};return{create:function(){return new t}}}),define("libs/timer",[],function(){var e=function(e,n){var t,i=this;i.start=function(){void 0===t&&(t=setInterval(n,e))},i.stop=function(){void 0!==t&&(clearInterval(t),t=void 0)},i.restart=function(){i.stop(),i.start()}};return{create:function(n,t){return new e(n,t)}}}),define("libs/socketIO",["socketIO","jquery","libs/timer"],function(e,n,t){var i,o=50,r=function(){return void 0===i?!1:i.socket.open},a=function(){var e=new n.Deferred,i=0,a=function(){return r()?(c.stop(),void e.resolve(!0)):i>o?(c.stop(),void e.reject("Impossible to connect")):void i++},c=t.create(100,a);return c.start(),e.promise()};return{connect:function(){return r()?void 0:(i?i.socket.connect():i=e.connect(),a())},disconnect:function(){r()&&i.disconnect()},send:function(e,n){if(!r())throw"Impossible to connect at server";i.emit(e,n)},on:function(e,n){i.on(e,n)},isConnected:function(){return r()},dispose:function(){i=void 0}}}),define("libs/voteSender",["libs/timer","libs/socketIO"],function(e,n){var t,i=[],o=function(){return void 0===t&&(t=e.create(1e3,r)),t},r=function(){o().stop();var e=i;i=[];for(var t in e)n.send("vote",{talkId:t,votesNb:e[t]})};return{isEnabled:function(){return n.isConnected()},enable:function(){return n.connect()},disable:function(){n.disconnect(),o().stop(),i=[]},send:function(e){void 0===i[e]?i[e]=1:i[e]++,o().start()},onTalkEnded:function(e){n.on("InvalidTalk",e)}}}),define("viewModels/talkVote",["knockout","libs/timer","libs/voteSender"],function(e,n,t){var i=function(i,o){var r=this;r.templateName="talkVoteTemplate",r.talkId=i,r.talkTitle=o,r.hasError=e.observable(!1),r.connected=e.observable(!1),r.talkEnded=e.observable(!1),r.happyLevel=e.observable(0);var a=0,c=function(){r.happyLevel(a>8?5:a>6?4:a>4?3:a>1?2:1==a?1:0),a=Math.floor(a/2)},s=n.create(500,c);r.vote=function(){return t.isEnabled()?(0>=a&&(s.restart(),r.happyLevel(1)),a++,void t.send(i)):void r.hasError(!0)},t.enable().done(function(){r.connected(!0)}).fail(function(){r.hasError(!0)}),t.onTalkEnded(function(){r.talkEnded(!0)}),r.dispose=function(){s.stop(),t.disable()}};return{create:function(e,n){return new i(e,n)}}}),define("libs/navigation",["sammy","viewModels/home","viewModels/about","viewModels/talkVote"],function(e,n,t,i){var o="#/",r="#/about",a="#/talkVote/",c=function(c,s){return e(function(){this.get(o,function(){c(n.create(s))}),this.get(r,function(){c(t.create())}),this.get(a+":talkId/:talkTitle",function(){var e=this.params;c(i.create(e.talkId,e.talkTitle))})})},s=function(e){window.location.hash=e},u=function(){var e,n=this;n.initialize=function(t){void 0!==e&&e.unload(),e=c(t,n),e.run(o)},n.displayHomePage=function(){s(o)},n.displayAboutPage=function(){s(r)},n.displayTalkVotePage=function(e,n){var t=encodeURIComponent(n);s(a+e+"/"+t)}};return new u}),define("libs/userVoice",[],function(){return UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/5nSEVeJdJTmitsQOvMs8Yg.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),UserVoice.push(["set",{accent_color:"#448dd6",trigger_color:"white",trigger_background_color:"#448dd6"}]),UserVoice.push(["identify",{}]),UserVoice.push(["addTrigger",{mode:"smartvote",trigger_position:"bottom-right"}]),UserVoice.push(["autoprompt",{}]),UserVoice}),define("libs/googleAnalytics",[],function(){return function(e,n,t,i,o,r,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=n.createElement(t),a=n.getElementsByTagName(t)[0],r.async=1,r.src=i,a.parentNode.insertBefore(r,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-50437771-1","mixit.fr"),window.ga("send","pageview"),{}}),define("main",["viewModels/main","knockout","libs/navigation","libs/userVoice","libs/googleAnalytics"],function(e,n,t){return function(){var i=e.create();t.initialize(function(e){i.changePage(e)}),n.applyBindings(i)}}),require.config({baseUrl:"",paths:{knockout:"//cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min",jquery:"//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min",socketIO:"//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min",sammy:"//cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.4/sammy.min"},shim:{sammy:{deps:["jquery"]}}}),require(["main"],function(e){e()}),define("application.build",["main"],function(){});